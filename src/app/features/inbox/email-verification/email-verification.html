<section class="verification-page">
  <div class="verification-card">

    <!-- ========================================
         ESTADO: VERIFICANDO
         ======================================== -->
    <div *ngIf="state() === 'verifying'" class="state-container verifying">
      <div class="spinner"></div>
      <h2>Verificando tu email...</h2>
      <p>Por favor espera mientras procesamos tu solicitud.</p>
    </div>

    <!-- ========================================
         ESTADO: Ã‰XITO
         ======================================== -->
    <div *ngIf="state() === 'success'" class="state-container success">
      <div class="icon success-icon">âœ“</div>
      <h2>Â¡Email verificado!</h2>
      <p>{{ message() }}</p>
      <p class="redirect-text">SerÃ¡s redirigido al inicio en unos segundos...</p>
      <div class="actions">
        <button (click)="goToHome()" class="btn-primary" type="button">
          Ir al inicio ahora
        </button>
      </div>
    </div>

    <!-- ========================================
         ESTADO: ERROR
         ======================================== -->
    <div *ngIf="state() === 'error'" class="state-container error">
      <div class="icon error-icon">âœ—</div>
      <h2>Error de verificaciÃ³n</h2>
      <p class="error-message">{{ message() }}</p>

      <div class="actions">
        <!-- BotÃ³n de reenvÃ­o si estÃ¡ disponible -->
        <button *ngIf="canResend()" (click)="resend()" [disabled]="resending() || resendCooldown() > 0"
          class="btn-secondary" type="button">
          <span *ngIf="!resending() && resendCooldown() === 0">
            Reenviar email de verificaciÃ³n
          </span>
          <span *ngIf="resending()" class="loading-dots">
            Enviando<span>.</span><span>.</span><span>.</span>
          </span>
          <span *ngIf="resendCooldown() > 0 && !resending()">
            Espera {{ getCooldownText() }}
          </span>
        </button>

        <!-- Mensaje de cooldown si no puede reenviar -->
        <p *ngIf="resendCooldown() > 0 && !canResend()" class="cooldown-text">
          PodrÃ¡s reenviar en {{ getCooldownText() }}
        </p>

        <!-- BotÃ³n de login -->
        <button (click)="goToLogin()" class="btn-link" type="button">
          Volver al login
        </button>
      </div>
    </div>

    <!-- ========================================
         ESTADO: IDLE (esperando o procesando)
         ======================================== -->
    <div *ngIf="state() === 'idle'" class="state-container idle">
      <div class="icon idle-icon">ðŸ“§</div>
      <h2>VerificaciÃ³n de email</h2>
      <p>{{ message() }}</p>
      <div class="actions">
        <button (click)="goToLogin()" class="btn-link" type="button">
          Volver al login
        </button>
      </div>
    </div>

  </div>
</section>