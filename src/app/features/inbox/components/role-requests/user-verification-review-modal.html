<!-- user-verification-review-modal.component.html (Dise√±o mejorado) -->
<div class="modal-overlay" (click)="onOverlayClick($event)">
  <div class="modal review-modal glass-modal" (click)="$event.stopPropagation()">

    <!-- Header Mejorado -->
    <div class="modal-header">
      <div class="header-content">
        <div>
          <h2>{{ 'userVerification.reviewModal.title' | translate }}</h2>
          <p class="subtitle">{{ 'userVerification.reviewModal.subtitle' | translate }}</p>
        </div>
      </div>
      <button class="close-btn" type="button" (click)="onClose()" [attr.aria-label]="'userVerification.reviewModal.closeAria' | translate">√ó</button>
    </div>

    <form (ngSubmit)="onSubmit()" class="modal-body">

      <!-- Verification Summary Card - Mejorado -->
      <div class="summary-card">
        <div class="summary-header">
          <span class="summary-icon">‚úâÔ∏è</span>
          <h3>{{ 'userVerification.reviewModal.verificationInfo' | translate }}</h3>
        </div>

        <div class="summary-grid">
          <!-- Email -->
          <div class="summary-item">
            <span class="item-label">{{ 'userVerification.reviewModal.summary.email' | translate }}</span>
            <div class="item-value">
              <strong class="email">{{ verification.email }}</strong>
            </div>
          </div>

          <!-- Fecha de Solicitud -->
          <div class="summary-item">
            <span class="item-label">{{ 'userVerification.reviewModal.summary.requestedAt' | translate }}</span>
            <span class="item-value date-value">{{ formatDate(verification.createdAt) }}</span>
          </div>

          <!-- Intentos -->
          <div class="summary-item">
            <span class="item-label">{{ 'userVerification.reviewModal.summary.attempts' | translate }}</span>
            <span class="item-value">{{ verification.attempts }} / {{ verification.maxAttempts }}</span>
          </div>
        </div>
      </div>

      <!-- Error Message -->
      <div *ngIf="error" class="alert alert-error">
        <span class="alert-icon">‚ö†Ô∏è</span>
        <div class="alert-content">
          <strong>{{ 'userVerification.reviewModal.error' | translate }}</strong>
          <p>{{ error }}</p>
        </div>
      </div>

      <!-- Decision Section - Mejorado -->
      <div class="decision-section">
        <div class="section-header">
          <span class="section-icon">‚öñÔ∏è</span>
          <label class="section-title">{{ 'userVerification.reviewModal.decision' | translate }}</label>
        </div>

        <div class="decision-options">
          <label class="decision-card approve-card" [class.selected]="action === 'approve'">
            <input type="radio" name="action" value="approve" [(ngModel)]="action" [disabled]="isSubmitting" />
            <div class="card-content">
              <span class="decision-icon">‚úì</span>
              <span class="decision-label">{{ 'userVerification.reviewModal.approve' | translate }}</span>
              <span class="decision-desc">{{ 'userVerification.reviewModal.approveDesc' | translate }}</span>
            </div>
            <div class="check-indicator"></div>
          </label>

          <label class="decision-card reject-card" [class.selected]="action === 'reject'">
            <input type="radio" name="action" value="reject" [(ngModel)]="action" [disabled]="isSubmitting" />
            <div class="card-content">
              <span class="decision-icon">‚úó</span>
              <span class="decision-label">{{ 'userVerification.reviewModal.reject' | translate }}</span>
              <span class="decision-desc">{{ 'userVerification.reviewModal.rejectDesc' | translate }}</span>
            </div>
            <div class="check-indicator"></div>
          </label>
        </div>
      </div>

      <!-- Comments Section - Mejorado -->
      <div class="comments-section">
        <div class="section-header">
          <span class="section-icon">üí¨</span>
          <label for="reason" class="section-title">
            {{ 'userVerification.reviewModal.rejectReasonLabel' | translate }}
            <span *ngIf="action === 'reject'" class="recommended-tag">{{ 'userVerification.reviewModal.recommended' | translate }}</span>
          </label>
        </div>

        <div class="textarea-wrapper">
          <textarea
            id="reason"
            [(ngModel)]="reason"
            name="reason"
            class="textarea-input"
            [placeholder]="'userVerification.reviewModal.rejectReasonPh' | translate"
            [disabled]="isSubmitting"
            rows="4"
            maxlength="500"></textarea>
          <div class="textarea-footer">
            <span class="character-count">{{ reason.length }}/500 {{ 'userVerification.reviewModal.characters' | translate }}</span>
          </div>
        </div>
      </div>

      <!-- Action Buttons - Mejorado -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="onClose()" [disabled]="isSubmitting">
          <span class="btn-icon">‚Üê</span>
          {{ 'userVerification.reviewModal.actions.cancel' | translate }}
        </button>

        <button
          type="submit"
          [class]="action === 'approve' ? 'btn btn-success' : (action === 'reject' ? 'btn btn-danger' : 'btn btn-secondary')"
          [disabled]="isSubmitting || !action">
          <span *ngIf="!isSubmitting && action" class="btn-icon">{{ action === 'approve' ? '‚úì' : '‚úó' }}</span>
          <span *ngIf="isSubmitting" class="spinner-small"></span>
          {{ isSubmitting
            ? ('userVerification.reviewModal.actions.processing' | translate)
            : (action === 'approve'
              ? ('userVerification.reviewModal.actions.approve' | translate)
              : (action === 'reject'
                ? ('userVerification.reviewModal.actions.reject' | translate)
                : ('userVerification.reviewModal.selectOption' | translate))) }}
        </button>
      </div>
    </form>

  </div>
</div>
