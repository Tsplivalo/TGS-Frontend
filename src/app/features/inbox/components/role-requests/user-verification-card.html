<div class="user-verification-card" [class.expanded]="isExpanded">
  <div class="card-header" (click)="toggleExpanded()">
    <div class="request-info">
      <div *ngIf="isAdmin" class="user-info">
        <span class="email">{{ verification.email }}</span>
      </div>

      <div class="role-info">
        <div class="role-new">
          <span class="role-badge">{{ 'userVerification.card.verificationLabel' | translate : {} : 'EMAIL VERIFICATION' }}</span>
          <span class="new-label">{{ 'userVerification.card.attemptsLabel' | translate : {attempts: verification.attempts, max: verification.maxAttempts} : verification.attempts + ' / ' + verification.maxAttempts + ' intentos' }}</span>
        </div>
      </div>
    </div>

    <div class="card-actions">
      <span [class]="getStatusBadgeClass(verification.status)">
        <span class="icon">{{ getStatusIcon(verification.status) }}</span>
        {{ getStatusText(verification.status) }}
      </span>
      <button class="expand-btn" type="button">
        <span class="icon" [class.expanded]="isExpanded">▼</span>
      </button>
    </div>
  </div>

  <div *ngIf="isExpanded" class="card-body">
    <div class="detail-section">
      <h4>{{ 'userVerification.card.infoTitle' | translate }}</h4>
      <div class="detail-grid">
        <div class="detail-item">
          <span class="label">{{ 'userVerification.card.labels.email' | translate }}</span>
          <span class="value">{{ verification.email }}</span>
        </div>

        <div class="detail-item">
          <span class="label">{{ 'userVerification.card.labels.requestedAt' | translate }}</span>
          <span class="value">{{ formatDate(verification.createdAt) }}</span>
        </div>

        <div class="detail-item">
          <span class="label">{{ 'userVerification.card.labels.attempts' | translate }}</span>
          <span class="value">{{ verification.attempts }} / {{ verification.maxAttempts }}</span>
        </div>

        <div *ngIf="verification.verifiedAt" class="detail-item">
          <span class="label">{{ 'userVerification.card.labels.verifiedAt' | translate }}</span>
          <span class="value">{{ formatDate(verification.verifiedAt) }}</span>
        </div>

        <div class="detail-item">
          <span class="label">{{ 'userVerification.card.labels.updatedAt' | translate }}</span>
          <span class="value">{{ formatDate(verification.updatedAt) }}</span>
        </div>
      </div>
    </div>

    <div *ngIf="isAdmin && verification.status === UserVerificationStatus.PENDING" class="action-buttons">
      <button class="btn btn-evaluate" (click)="onReview($event)">
        <span class="icon">⚖️</span>
        {{ 'userVerification.card.reviewBtn' | translate : {} : 'Review Verification' }}
      </button>
    </div>
  </div>
</div>