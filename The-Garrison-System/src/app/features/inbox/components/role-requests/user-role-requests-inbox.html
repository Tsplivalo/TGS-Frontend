<div class="user-role-requests-inbox">
  <div class="inbox-header">
    <div>
      <h2>Mis Solicitudes de Rol</h2>
      <p class="subtitle">Gestiona tus solicitudes de roles especiales</p>
    </div>

    <button *ngIf="hasCompleteProfile" class="btn btn-primary" (click)="openModal()">
      <span class="icon">+</span>
      Nueva Solicitud
    </button>

    <div *ngIf="!hasCompleteProfile" class="incomplete-profile-warning">
      <span class="icon">⚠️</span>
      <span>Completa tu perfil para solicitar roles</span>
    </div>
  </div>

  <div *ngIf="loading" class="loading">Cargando solicitudes...</div>

  <div *ngIf="error && !loading" class="error-message">
    <span class="icon">❌</span>
    {{ error }}
    <button class="btn-link" (click)="loadRequests()">Reintentar</button>
  </div>

  <div *ngIf="!loading && !error && requests.length === 0" class="empty-state">
    <div class="empty-icon">📋</div>
    <h3>No tienes solicitudes</h3>
    <p>
      {{ hasCompleteProfile
      ? 'Cuando solicites un rol especial, aparecerá aquí'
      : 'Completa tu perfil para poder solicitar roles especiales' }}
    </p>
    <button *ngIf="hasCompleteProfile" class="btn btn-primary" (click)="openModal()">
      Crear Primera Solicitud
    </button>
  </div>

  <div *ngIf="!loading && !error && requests.length > 0" class="requests-list">
    <app-role-request-card *ngFor="let request of requests" [request]="request" [isAdmin]="false">
    </app-role-request-card>
  </div>

  <app-role-request-modal *ngIf="hasCompleteProfile" [isOpen]="isModalOpen" [currentRoles]="currentRoles"
    (close)="closeModal()" (requestSubmitted)="handleRequestSubmitted()">
  </app-role-request-modal>
</div>