<section class="grid">
  <div class="card">
    <div class="header">
      <h2>Sobornos</h2>
      <!-- Sin botón "Nuevo" -->
    </div>

    <div class="filters">
      <label class="label">
        Buscar
        <input class="input" placeholder="id, id venta, id autoridad" [(ngModel)]="filtroText" />
      </label>
    </div>

    <div class="table-wrapper">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Venta</th>
            <th>Autoridad</th>
            <th>Monto</th>
            <th>Pagado</th>
            <th>Fecha</th>
            <th class="right">Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (s of filtrados(); track s.id) {
          <tr>
            <td>{{ s.id }}</td>
            <td>{{ s.venta?.id ?? s.ventaId }}</td>
            <td>{{ s.autoridad?.id ?? s.autoridadId }}</td>
            <td>{{ s.monto | currency:'ARS' }}</td>
            <td>{{ s.pagado ? 'Sí' : 'No' }}</td>
            <td>{{ s.fechaCreacion | date:'short' }}</td>
            <td class="right">
              <!-- Quité "Editar" para evitar acciones sin formulario -->
              <button class="btn success" type="button" (click)="marcarPagado(s)" [disabled]="s.pagado">
                Marcar pagado
              </button>
            </td>
          </tr>
          }
          @if (filtrados().length === 0) {
          <tr>
            <td colspan="7" class="center muted">Sin sobornos</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</section>