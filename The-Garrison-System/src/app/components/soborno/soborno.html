<section class="stack-lg">
  <!-- LISTA -->
  <div class="glass-dark card stack-md">
    <div class="header">
      <h2>Sobornos</h2>
      <div class="right">
        <!-- (No hay botón "Nuevo") -->
      </div>
    </div>

    <!-- Filtros -->
    <div class="filters">
      <label class="label">
        <span>Buscar</span>
        <input class="input" placeholder="id, id venta, id autoridad" [(ngModel)]="filtroText" />
      </label>
    </div>

    <!-- Tabla -->
    <div class="table-wrap">
      <table class="table" *ngIf="filtrados().length; else empty">
        <!-- anchos fijos para alinear thead/tbody -->
        <colgroup>
          <col style="width:90px" /> <!-- ID -->
          <col style="width:110px" /> <!-- Venta -->
          <col style="width:130px" /> <!-- Autoridad -->
          <col style="width:140px" /> <!-- Monto -->
          <col style="width:110px" /> <!-- Pagado -->
          <col style="width:160px" /> <!-- Fecha -->
          <col style="width:220px" /> <!-- Acciones -->
        </colgroup>

        <thead>
          <tr>
            <th>ID</th>
            <th>Venta</th>
            <th>Autoridad</th>
            <th>Monto</th>
            <th>Pagado</th>
            <th>Fecha</th>
            <th class="right">Acciones</th>
          </tr>
        </thead>

        <tbody>
          @for (s of filtrados(); track s.id) {
          <tr>
            <td>#{{ s.id }}</td>
            <td>{{ s.venta?.id ?? s.ventaId }}</td>
            <td>{{ s.autoridad?.id ?? s.autoridadId }}</td>
            <td>{{ s.monto | currency:'ARS' }}</td>
            <td>{{ s.pagado ? 'Sí' : 'No' }}</td>
            <td>{{ s.fechaCreacion | date:'short' }}</td>
            <td class="right">
              <button class="btn success btn-glass" type="button" (click)="marcarPagado(s)" [disabled]="s.pagado">
                Marcar pagado
              </button>
            </td>
          </tr>
          }
        </tbody>
      </table>

      <ng-template #empty>
        <div class="center muted">Sin sobornos</div>
      </ng-template>
    </div>
  </div>
</section>