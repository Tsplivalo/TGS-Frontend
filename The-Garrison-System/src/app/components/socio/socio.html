<div class="p-4 max-w-5xl mx-auto">
  <h1 class="text-2xl font-semibold mb-4">Socios</h1>

  <div class="flex gap-2 items-center mb-4">
    <input class="border rounded px-3 py-2 flex-1" placeholder="Buscar por nombre…" [(ngModel)]="query" />
    <button class="border px-3 py-2 rounded" (click)="onSearch()">Buscar</button>
    <button class="border px-3 py-2 rounded" (click)="newSocio()">Nuevo socio</button>
  </div>

  <div class="overflow-auto">
    <table class="min-w-full border border-gray-300 rounded">
      <thead class="bg-gray-100">
        <tr>
          <th class="text-left p-2 border-b">ID</th>
          <th class="text-left p-2 border-b">Nombre</th>
          <th class="text-left p-2 border-b">Email</th>
          <th class="text-left p-2 border-b">Teléfono</th>
          <th class="text-left p-2 border-b">Estado</th>
          <th class="text-left p-2 border-b">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let s of socios">
          <td class="p-2 border-b">{{ s.id }}</td>
          <td class="p-2 border-b">{{ s.name }}</td>
          <td class="p-2 border-b">{{ s.email || '—' }}</td>
          <td class="p-2 border-b">{{ s.phone || '—' }}</td>
          <td class="p-2 border-b">
            <span class="px-2 py-1 rounded text-sm"
                  [class.bg-green-100]="s.status==='active'"
                  [class.bg-gray-200]="s.status==='inactive'">
              {{ s.status }}
            </span>
          </td>
          <td class="p-2 border-b">
            <button class="underline mr-2" (click)="editSocio(s)">Editar</button>
            <button class="underline mr-2" (click)="toggleStatus(s)">
              {{ s.status === 'active' ? 'Desactivar' : 'Activar' }}
            </button>
            <button class="underline text-red-600" (click)="remove(s)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Panel de edición/alta -->
  <div *ngIf="selected !== null" class="mt-6 border rounded p-4">
    <h2 class="text-lg font-medium mb-3">{{ selected ? 'Editar socio' : 'Nuevo socio' }}</h2>

    <form [formGroup]="form" class="grid gap-3 md:grid-cols-2">
      <label class="flex flex-col">
        <span class="mb-1">Nombre *</span>
        <input class="border rounded px-3 py-2" formControlName="name" />
        <small class="text-red-600" *ngIf="form.controls.name.invalid && form.controls.name.touched">
          Ingresá al menos 2 caracteres
        </small>
      </label>

      <label class="flex flex-col">
        <span class="mb-1">Email</span>
        <input class="border rounded px-3 py-2" formControlName="email" />
      </label>

      <label class="flex flex-col">
        <span class="mb-1">Teléfono</span>
        <input class="border rounded px-3 py-2" formControlName="phone" />
      </label>

      <label class="flex flex-col">
        <span class="mb-1">Estado</span>
        <select class="border rounded px-3 py-2" formControlName="status">
          <option value="active">Activo</option>
          <option value="inactive">Inactivo</option>
        </select>
      </label>
    </form>

    <div class="mt-4 flex gap-2">
      <button class="border px-3 py-2 rounded" (click)="save()">Guardar</button>
      <button class="border px-3 py-2 rounded" (click)="cancel()">Cancelar</button>
    </div>
  </div>
</div>
